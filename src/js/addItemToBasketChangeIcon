import { refs } from './refs';

const BUSKET = 'busket';
const busketArr = JSON.parse(localStorage.getItem(BUSKET)) ?? [];

function findProduct(productId) {
    return results.find(({ _id }) => _id === productId);
}

refs.prodElContainer.addEventListener('click', onClick);

function onClick(evt) {
    evt.preventDafault();
    if (evt.target.classList.contains('js-button-shopping')) {
        const { _id } = evt.target.closest('js-product-card').dataset;
        console.log(_id);
        const product = findProduct(Number(_id));
        const inStorage = busketArr.some(({ _id }) => _id === product._id)
        
        // if (inStorage) {
        //     const changeIcon = function (icon) {
        //         icon.classList.replace();
        //     }
        //     return;
        // }

        busketArr.push(product);
        lokalStorage.setItem(BUSKET, JSON.stringify(busketArr));
    }
}