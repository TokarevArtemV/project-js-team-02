import { refs } from './refs';

refs.buttonShopping = document.querySelector('.js-button-shopping');

const KEY_BUSKET = 'busket';
const busketArr = JSON.parse(localStorage.getItem(KEY_BUSKET)) ?? [];

function findProduct(productId) {
    return data.find(({ _id }) => _id === productId);
}

buttonShopping.addEventListener('click', onClick);

function onClick(evt) {
    evt.preventDafault();
    if (evt.target.classList.contains('js-button-shopping')) {
        const { _id } = evt.target.closest('js-product-card').dataset;
        const product = findProduct(Number(_id));
        const inStorage = busketArr.some(({ _id }) => _id === product._id)
        
        if (inStorage) {
            const ChangeIcon = function (icon) {
                icon.classList.toggle('#icon-check');
            }
            return;
        }

        busketArr.push(product);
        lokalStorage.setItem(KEY_BUSKET, JSON.stringify(busketArr));
    }
}